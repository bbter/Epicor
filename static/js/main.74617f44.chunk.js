(this.webpackJsonpepic=this.webpackJsonpepic||[]).push([[2],{104:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(12),a=n.n(i),c=(n(104),n(25)),l=n(88),u=n.n(l),s=n(38),p=n(6),f=n(26),b=n(133),m=n(69),h=n(73);function y(){var e=Object(c.a)(["\n   margin-left: 10px;\n"]);return y=function(){return e},e}function O(){var e=Object(c.a)(["\n  margin-left: auto;\n"]);return O=function(){return e},e}function g(){var e=Object(c.a)(["\n    color:#fff;\n    margin-left:30px;\n    \n    &.active{\n        border-bottom:1px solid #fff;\n    }\n"]);return g=function(){return e},e}function j(){var e=Object(c.a)(["\n    height:30px\n"]);return j=function(){return e},e}function d(){var e=Object(c.a)(["\n    display:flex;\n    align-items:center;\n    padding:10px 100px;\n    background-color:#02101F;\n    color:#fff;\n"]);return d=function(){return e},e}var v=f.a.header(d()),w=f.a.img(j()),U=Object(f.a)(s.b)(g()),E=f.a.div(O()),P=Object(f.a)(b.a)(y()),k=Object(h.a)((function(){var e=Object(p.f)(),t=Object(m.a)(),n=t.UserStore,r=t.AuthStore;return o.a.createElement(v,null,o.a.createElement(w,{src:u.a}),o.a.createElement("nav",null,o.a.createElement(U,{to:"/",activeClassName:"active",exact:!0},"\u9996\u9875"),o.a.createElement(U,{to:"/history",activeClassName:"active"},"\u4e0a\u4f20\u5386\u53f2"),o.a.createElement(U,{to:"/about",activeClassName:"active"},"\u5173\u4e8e\u6211")),o.a.createElement(E,null,n.currentUser?o.a.createElement(o.a.Fragment,null,n.currentUser," ",o.a.createElement(P,{type:"primary",onClick:function(){r.logout()}},"\u6ce8\u9500")):o.a.createElement(o.a.Fragment,null,o.a.createElement(P,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u767b\u5f55\u9875"),e.push("/login")}},"\u767b\u5f55"),o.a.createElement(P,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u6ce8\u518c\u9875\u9762"),e.push("/register")}},"\u6ce8\u518c"))))}));function z(){var e=Object(c.a)(["\n    padding: 10px 100px;\n    text-align: center;\n    font-size: 12px;\n    color: #aaa;\n"]);return z=function(){return e},e}var x=f.a.footer(z());var F=function(){return o.a.createElement(x,null,o.a.createElement("p",null,"Footer"))};var D=function(){return o.a.createElement("div",null,"Loading...")},S=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(9)]).then(n.bind(null,328))})),I=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(8)]).then(n.bind(null,329))})),C=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,320))})),L=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,321))})),M=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,322))}));var N=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(k,null),o.a.createElement("main",null,o.a.createElement(r.Suspense,{fallback:o.a.createElement(D,null)},o.a.createElement(p.c,null,o.a.createElement(p.a,{path:"/",exact:!0,component:S}),o.a.createElement(p.a,{path:"/history",component:I}),o.a.createElement(p.a,{path:"/about",component:C}),o.a.createElement(p.a,{path:"/login",component:L}),o.a.createElement(p.a,{path:"/register",component:M})))),o.a.createElement(F,null))};n(131),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(s.a,null,o.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},69:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(0),o=n(13),i=n(27),a=n(28),c=n(3),l=(n(49),n(1)),u=n(17),s=n.n(u);s.a.init({appId:"K68R89836OGSdv9RPnlhel0I-gzGzoHsz",appKey:"kQUtnql9BMq4Y0qdpGApg6p3",serverURL:"https://k68r8983.lc-cn-n1-shared.com"});var p,f,b=function(e,t){var n=new u.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},m=function(e,t){return new Promise((function(n,r){u.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},h=function(){u.User.logOut()},y=function(){return u.User.current()},O={add:function(e,t){var n=new s.a.Object("Images"),r=new s.a.File(t,e);return n.set("filename",t),n.set("owner",s.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},find:function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,o=void 0===r?10:r,i=new s.a.Query("Images");return i.include("owner"),i.limit(o),i.skip(n*o),i.descending("createdAt"),i.equalTo("owner",s.a.User.current()),new Promise((function(e,t){i.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))}};window.Uploader=O;var g,j,d,v,w,U,E,P,k,z,x,F,D=new(p=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"currentUser",f,this),Object(l.m)(this)}return Object(a.a)(e,[{key:"pullUser",value:function(){this.currentUser=y().attributes.username,localStorage.setItem("currentUser",JSON.stringify(this.currentUser))}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),f=Object(c.a)(p.prototype,"currentUser",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return JSON.parse(localStorage.getItem("currentUser"))||""}}),Object(c.a)(p.prototype,"pullUser",[l.f],Object.getOwnPropertyDescriptor(p.prototype,"pullUser"),p.prototype),Object(c.a)(p.prototype,"resetUser",[l.f],Object.getOwnPropertyDescriptor(p.prototype,"resetUser"),p.prototype),p),S=n(134),I=new(g=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"list",j,this),Object(o.a)(this,"isLoading",d,this),Object(o.a)(this,"hasMore",v,this),Object(o.a)(this,"page",w,this),this.limit=10,Object(l.m)(this)}return Object(a.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,O.find({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){S.b.error("\u52a0\u8f7d\u6570\u636e\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0,this.limit=10}}]),e}(),j=Object(c.a)(g.prototype,"list",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=Object(c.a)(g.prototype,"isLoading",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=Object(c.a)(g.prototype,"hasMore",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w=Object(c.a)(g.prototype,"page",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(c.a)(g.prototype,"append",[l.f],Object.getOwnPropertyDescriptor(g.prototype,"append"),g.prototype),Object(c.a)(g.prototype,"find",[l.f],Object.getOwnPropertyDescriptor(g.prototype,"find"),g.prototype),Object(c.a)(g.prototype,"reset",[l.f],Object.getOwnPropertyDescriptor(g.prototype,"reset"),g.prototype),g),C=new(U=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"filename",E,this),Object(o.a)(this,"file",P,this),Object(o.a)(this,"isUploading",k,this),Object(o.a)(this,"serverFile",z,this),Object(l.m)(this)}return Object(a.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,this.serverFile=null,new Promise((function(t,n){O.add(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){S.b.error("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.isUploading=!1,this.serverFile=null}}]),e}(),E=Object(c.a)(U.prototype,"filename",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),P=Object(c.a)(U.prototype,"file",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=Object(c.a)(U.prototype,"isUploading",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=Object(c.a)(U.prototype,"serverFile",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(U.prototype,"setFilename",[l.f],Object.getOwnPropertyDescriptor(U.prototype,"setFilename"),U.prototype),Object(c.a)(U.prototype,"setFile",[l.f],Object.getOwnPropertyDescriptor(U.prototype,"setFile"),U.prototype),Object(c.a)(U.prototype,"upload",[l.f],Object.getOwnPropertyDescriptor(U.prototype,"upload"),U.prototype),Object(c.a)(U.prototype,"reset",[l.f],Object.getOwnPropertyDescriptor(U.prototype,"reset"),U.prototype),U),L=new(x=function(){function e(){Object(i.a)(this,e),Object(o.a)(this,"values",F,this),Object(l.m)(this)}return Object(a.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){m(e.values.username,e.values.password).then((function(e){D.pullUser(),t(e)})).catch((function(e){D.resetUser(),S.b.error("\u767b\u5f55\u5931\u8d25"),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){b(e.values.username,e.values.password).then((function(e){D.pullUser(),t(e)})).catch((function(e){D.resetUser(),S.b.error("\u6ce8\u518c\u5931\u8d25"),n(e)}))}))}},{key:"logout",value:function(){h(),D.resetUser(),I.reset(),C.reset()}}]),e}(),F=Object(c.a)(x.prototype,"values",[l.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(c.a)(x.prototype,"setUsername",[l.f],Object.getOwnPropertyDescriptor(x.prototype,"setUsername"),x.prototype),Object(c.a)(x.prototype,"setPassword",[l.f],Object.getOwnPropertyDescriptor(x.prototype,"setPassword"),x.prototype),Object(c.a)(x.prototype,"login",[l.f],Object.getOwnPropertyDescriptor(x.prototype,"login"),x.prototype),Object(c.a)(x.prototype,"register",[l.f],Object.getOwnPropertyDescriptor(x.prototype,"register"),x.prototype),Object(c.a)(x.prototype,"logout",[l.f],Object.getOwnPropertyDescriptor(x.prototype,"logout"),x.prototype),x),M=Object(r.createContext)({AuthStore:L,UserStore:D,ImageStore:C,HistoryStore:I}),N=function(){return Object(r.useContext)(M)}},88:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},99:function(e,t,n){e.exports=n(132)}},[[99,3,4]]]);
//# sourceMappingURL=main.74617f44.chunk.js.map